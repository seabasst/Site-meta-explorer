---
phase: 05-error-handling-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/ui/skeleton.tsx
  - src/components/ui/sonner.tsx
  - src/components/ui/alert.tsx
  - components.json
autonomous: true
user_setup: []

must_haves:
  truths:
    - "shadcn/ui Skeleton, Sonner, and Alert components are installed and importable"
    - "react-error-boundary package is available for use"
    - "Zod and React Hook Form packages are available for validation"
  artifacts:
    - path: "src/components/ui/skeleton.tsx"
      provides: "Skeleton loading placeholder component"
      exports: ["Skeleton"]
    - path: "src/components/ui/sonner.tsx"
      provides: "Toaster component for notifications"
      exports: ["Toaster"]
    - path: "src/components/ui/alert.tsx"
      provides: "Alert component for error banners"
      exports: ["Alert", "AlertTitle", "AlertDescription"]
    - path: "components.json"
      provides: "shadcn/ui configuration"
      contains: "shadcn"
  key_links:
    - from: "package.json"
      to: "node_modules"
      via: "npm install"
      pattern: "react-error-boundary|zod|react-hook-form"
---

<objective>
Install shadcn/ui foundation components (Skeleton, Sonner, Alert) and npm packages (react-error-boundary, Zod, React Hook Form) required for Phase 5 error handling features.

Purpose: Establishes the component library foundation for loading states, notifications, and error handling. All subsequent plans depend on these components being available.

Output: shadcn/ui components in src/components/ui/, npm packages in node_modules, components.json configuration
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-error-handling-foundation/05-RESEARCH.md
@src/components/ui/chart.tsx
@src/app/layout.tsx
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize shadcn/ui and install components</name>
  <files>
    - components.json
    - src/components/ui/skeleton.tsx
    - src/components/ui/sonner.tsx
    - src/components/ui/alert.tsx
    - src/lib/utils.ts (cn utility if not exists)
  </files>
  <action>
    1. Check if components.json exists. If not, run `pnpm dlx shadcn@latest init` with:
       - Style: default
       - Base color: neutral
       - CSS variables: yes
       - Components path: src/components
       - Use React Server Components: yes (Next.js 16+ compatible)

    2. Add shadcn/ui components via CLI:
       ```bash
       pnpm dlx shadcn@latest add skeleton sonner alert
       ```

    3. Verify each component file exists in src/components/ui/

    4. Ensure src/lib/utils.ts contains the cn() utility function:
       ```typescript
       import { clsx, type ClassValue } from "clsx"
       import { twMerge } from "tailwind-merge"

       export function cn(...inputs: ClassValue[]) {
         return twMerge(clsx(inputs))
       }
       ```

    Note: shadcn/ui CLI handles Tailwind v4 and React 19 automatically since v2.0.
  </action>
  <verify>
    - `ls src/components/ui/` shows skeleton.tsx, sonner.tsx, alert.tsx
    - `cat components.json` shows valid configuration
    - `cat src/lib/utils.ts` contains cn function
  </verify>
  <done>
    - components.json exists with valid shadcn/ui config
    - Skeleton, Sonner, Alert components exist in src/components/ui/
    - cn() utility function available in src/lib/utils.ts
  </done>
</task>

<task type="auto">
  <name>Task 2: Install npm packages for error handling and validation</name>
  <files>
    - package.json
  </files>
  <action>
    Install required npm packages:
    ```bash
    npm install react-error-boundary @hookform/resolvers zod react-hook-form
    ```

    Expected additions to package.json dependencies:
    - react-error-boundary: ^6.x (for error boundaries with retry)
    - zod: ^3.x (for schema validation)
    - react-hook-form: ^7.x (for form state management)
    - @hookform/resolvers: ^3.x (for Zod integration)

    Note: clsx and tailwind-merge should already be installed by shadcn init. If not, they will be installed as dependencies of shadcn components.
  </action>
  <verify>
    - `cat package.json | grep react-error-boundary` shows version
    - `cat package.json | grep zod` shows version
    - `cat package.json | grep react-hook-form` shows version
    - `npm ls react-error-boundary zod react-hook-form` shows packages installed
  </verify>
  <done>
    - react-error-boundary, zod, react-hook-form, @hookform/resolvers in package.json
    - All packages installed in node_modules
    - No npm install errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify installation and build</name>
  <files>None (verification only)</files>
  <action>
    1. Run type check to ensure no TypeScript errors:
       ```bash
       npx tsc --noEmit
       ```

    2. Run build to verify Next.js compiles correctly:
       ```bash
       npm run build
       ```

    3. Create a simple import test file (temporary) to verify components are importable:
       ```typescript
       // test-imports.ts (delete after verification)
       import { Skeleton } from '@/components/ui/skeleton';
       import { Toaster } from '@/components/ui/sonner';
       import { Alert, AlertTitle, AlertDescription } from '@/components/ui/alert';
       import { ErrorBoundary } from 'react-error-boundary';
       import { z } from 'zod';
       import { useForm } from 'react-hook-form';
       import { zodResolver } from '@hookform/resolvers/zod';
       ```

    4. Delete the test file after verification.

    If build fails due to missing dependencies (like lucide-react for icons in Alert), install them:
    ```bash
    npm install lucide-react
    ```
  </action>
  <verify>
    - `npm run build` completes without errors
    - No TypeScript errors
  </verify>
  <done>
    - Build succeeds
    - All shadcn/ui components importable
    - All npm packages importable
    - Ready for Plan 02 (error utilities)
  </done>
</task>

</tasks>

<verification>
1. Run `npm run build` - must complete successfully
2. Verify component files exist:
   - src/components/ui/skeleton.tsx
   - src/components/ui/sonner.tsx
   - src/components/ui/alert.tsx
3. Verify packages in package.json:
   - react-error-boundary
   - zod
   - react-hook-form
   - @hookform/resolvers
4. Verify components.json exists with valid config
</verification>

<success_criteria>
- shadcn/ui initialized with components.json
- Skeleton, Sonner, Alert components installed in src/components/ui/
- react-error-boundary, Zod, React Hook Form packages installed
- Build passes with no errors
- All components and packages importable
</success_criteria>

<output>
After completion, create `.planning/phases/05-error-handling-foundation/05-01-SUMMARY.md`
</output>
