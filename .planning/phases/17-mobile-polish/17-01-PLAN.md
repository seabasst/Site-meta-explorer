---
phase: 17-mobile-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/page.tsx
autonomous: true

must_haves:
  truths:
    - "Options bar wraps cleanly on 375px screens without horizontal overflow"
    - "Media type breakdown stacks vertically on mobile"
    - "All-ads table scrolls horizontally on mobile without page overflow"
    - "Tab navigation does not overflow on small screens"
    - "Export dropdown opens on tap (not hover-only)"
    - "ActiveChartFilter close button has 48px touch target"
    - "Example brand pills have adequate touch targets"
  artifacts:
    - path: "src/app/page.tsx"
      provides: "Responsive main page layout"
      contains: "flex-col sm:flex-row"
  key_links:
    - from: "src/app/page.tsx options bar"
      to: "mobile layout"
      via: "Tailwind responsive classes"
      pattern: "hidden sm:block"
---

<objective>
Make the main page (page.tsx) fully responsive and touch-friendly on mobile devices.

Purpose: The main page contains the options bar, media type breakdown, all-ads table, tab navigation, export dropdown, and various interactive elements that currently break or are unusable on mobile viewports (375px+). This plan fixes all mobile issues within page.tsx.

Output: A responsive page.tsx where all sections adapt to mobile screens, touch targets meet 48px minimum, and hover-only interactions have tap alternatives.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/17-mobile-polish/17-RESEARCH.md
@src/app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix layout overflow issues in page.tsx</name>
  <files>src/app/page.tsx</files>
  <action>
Make the following responsive fixes in src/app/page.tsx:

1. **Options bar (~L606-705):** Hide the vertical divider elements (`w-px h-6 bg-[var(--border-subtle)]`) on mobile by adding `hidden sm:block` class. The flex-wrap is already present but dividers look broken when wrapped. Group the date range inputs to stack on mobile: wrap the date inputs section in a `flex flex-wrap items-center gap-2` container. Ensure the overall options div works well when items wrap to multiple lines.

2. **Media type breakdown (~L1303-1384):** Change the outer container from `flex items-center gap-8` to `flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8`. Change the divider from `h-12 w-px` to `h-px w-full sm:h-12 sm:w-px` so it becomes horizontal on mobile. Apply the same pattern to the unknown media type divider. Ensure the buttons have `min-h-[48px]` for touch targets.

3. **All-ads table (~L1486-1553):** Wrap the table container div (the one with `max-h-[400px] overflow-y-auto`) with an outer div that has `overflow-x-auto`. Add `min-w-[640px]` to the table element so it scrolls horizontally on mobile instead of squishing columns.

4. **Tab navigation (~L1067-1107):** Change the tab container from `w-fit` to `w-fit max-w-full overflow-x-auto`. This allows horizontal scrolling if tabs overflow on very narrow screens. Alternatively, on small screens, hide the SVG icons in tabs by adding `hidden sm:block` to the svg elements, and reduce padding from `px-4` to `px-3 sm:px-4` to save space.

5. **Export dropdown (~L932-997):** The dropdown currently uses `group-hover:opacity-100 group-hover:visible` which is hover-only. Add click-to-toggle behavior: add an `exportOpen` state variable (boolean), toggle it on button click, and show the dropdown when `exportOpen` is true OR on group-hover. Add a `useEffect` to close the dropdown when clicking outside. The dropdown trigger button onClick should toggle `exportOpen`. Keep the hover behavior for desktop (it still works on desktop). Add `onClick` handler to export dropdown items that also sets `exportOpen(false)` after triggering their action.

6. **ActiveChartFilter close button (~L52-64):** Change the close button from `p-0.5` to `p-2 -m-1.5` to expand the touch target to ~44px while keeping the visual size the same. The X icon stays at `w-3.5 h-3.5` but the hit area is larger.

7. **Example brand pills (~L711-731):** Add `min-h-[44px]` to the button className and change padding from `py-1.5` to `py-2.5` to ensure adequate touch targets on mobile.
  </action>
  <verify>
Run `npx next build` to confirm no build errors. Visually inspect the page at 375px viewport width in browser DevTools to confirm:
- Options bar wraps without horizontal page overflow
- Media type section stacks vertically
- All-ads table scrolls horizontally
- Tab navigation fits or scrolls
- Export dropdown opens on tap
- Close button on chart filter has visible expanded hit area
  </verify>
  <done>
All page.tsx layout sections adapt to 375px mobile viewport without horizontal page overflow. All interactive elements have minimum 44px touch targets. Export dropdown works via tap on touch devices.
  </done>
</task>

</tasks>

<verification>
- No horizontal page overflow at 375px viewport width
- All interactive elements have minimum 44px touch targets
- Export dropdown opens on tap (not hover-only)
- `npx next build` succeeds without errors
</verification>

<success_criteria>
- page.tsx renders without horizontal overflow at 375px width
- Options bar wraps cleanly with hidden dividers on mobile
- Media type section stacks vertically on mobile
- All-ads table has horizontal scroll on mobile
- Tab navigation fits or scrolls on narrow screens
- Export dropdown is tap-accessible
- All touch targets meet 44-48px minimum
</success_criteria>

<output>
After completion, create `.planning/phases/17-mobile-polish/17-01-SUMMARY.md`
</output>
