---
phase: 17-mobile-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/analytics/ad-copy-analysis.tsx
  - src/components/analytics/landing-page-analysis.tsx
  - src/components/analytics/ad-longevity.tsx
  - src/components/analytics/time-trends.tsx
  - src/components/analytics/product-market-table.tsx
  - src/components/results-table.tsx
  - src/components/demographics/country-chart.tsx
  - src/components/demographics/age-gender-chart.tsx
autonomous: true

must_haves:
  truths:
    - "Stats grids in all analytics components adapt to mobile (1-2 columns)"
    - "Hook patterns grid wraps to 2 columns on mobile"
    - "Results table scrolls horizontally on mobile"
    - "Country chart labels fit on mobile screens"
    - "Chart hover data is accessible on touch devices"
  artifacts:
    - path: "src/components/analytics/ad-copy-analysis.tsx"
      provides: "Responsive hook patterns grid"
      contains: "grid-cols-2"
    - path: "src/components/analytics/landing-page-analysis.tsx"
      provides: "Responsive landing page stats grid"
      contains: "grid-cols-2"
    - path: "src/components/demographics/country-chart.tsx"
      provides: "Mobile-friendly country chart"
      contains: "sm:w-36"
  key_links:
    - from: "analytics components"
      to: "mobile layout"
      via: "Tailwind responsive grid classes"
      pattern: "grid-cols-\\d+ sm:grid-cols-\\d+"
---

<objective>
Make all analytics components and chart components responsive and touch-friendly on mobile.

Purpose: Multiple component files contain fixed-width grids (grid-cols-3, grid-cols-4, grid-cols-5), tables without horizontal scroll, and hover-only interactions that break on mobile. This plan fixes all component-level mobile issues outside of page.tsx.

Output: All analytics components, charts, and tables adapt gracefully to 375px mobile screens with responsive grids, scrollable tables, and touch-accessible chart interactions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/17-mobile-polish/17-RESEARCH.md
@src/components/analytics/ad-copy-analysis.tsx
@src/components/analytics/landing-page-analysis.tsx
@src/components/analytics/ad-longevity.tsx
@src/components/analytics/time-trends.tsx
@src/components/analytics/product-market-table.tsx
@src/components/results-table.tsx
@src/components/demographics/country-chart.tsx
@src/components/demographics/age-gender-chart.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix responsive grids in analytics components</name>
  <files>
    src/components/analytics/ad-copy-analysis.tsx
    src/components/analytics/landing-page-analysis.tsx
    src/components/analytics/ad-longevity.tsx
    src/components/analytics/time-trends.tsx
    src/components/analytics/product-market-table.tsx
  </files>
  <action>
Apply responsive grid breakpoints to all fixed-width grids:

1. **ad-copy-analysis.tsx (~L163):** Change `grid grid-cols-5 gap-2` to `grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2`. The 5th item will naturally flow to a new row on mobile which is fine.

2. **landing-page-analysis.tsx (~L147):** Change `grid grid-cols-4 gap-4` to `grid grid-cols-2 sm:grid-cols-4 gap-4`. The 4 stats cards will become 2x2 on mobile.

3. **ad-longevity.tsx (~L88):** Change `grid grid-cols-3 gap-4` to `grid grid-cols-1 sm:grid-cols-3 gap-4`. The 3 stats cards stack on mobile.

4. **time-trends.tsx (~L159):** Change `grid grid-cols-3 gap-4` to `grid grid-cols-1 sm:grid-cols-3 gap-4`. The 3 trend summary cards stack on mobile.

5. **product-market-table.tsx (~L272):** The summary stats grid at `grid grid-cols-3 gap-4` should become `grid grid-cols-1 sm:grid-cols-3 gap-4`. The market cards grid at ~L166 already has `grid-cols-2 md:grid-cols-3 lg:grid-cols-4` which is good -- leave it as-is.
  </action>
  <verify>
Run `npx next build` to confirm no build errors. Check each component renders at 375px width without horizontal overflow.
  </verify>
  <done>
All analytics component grids use responsive breakpoints. At 375px, grids show 1-2 columns. At 640px+, grids show their intended layout.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix tables and charts for mobile</name>
  <files>
    src/components/results-table.tsx
    src/components/demographics/country-chart.tsx
    src/components/demographics/age-gender-chart.tsx
  </files>
  <action>
1. **results-table.tsx:** Both table containers (ad destination URLs table ~L277, sitemap URLs table ~L369) are wrapped in `max-h-[600px] overflow-y-auto` divs. Add `overflow-x-auto` to these same divs (making them `max-h-[600px] overflow-y-auto overflow-x-auto` or just `max-h-[600px] overflow-auto`). Add `min-w-[640px]` to both `<table>` elements so they scroll horizontally on mobile rather than squishing.

2. **country-chart.tsx (~L119):** The label column uses `w-36 flex-shrink-0` (144px fixed). Change to `w-20 sm:w-36 flex-shrink-0` so labels are narrower on mobile (80px), leaving more room for the bar chart. The truncation on the country name span already handles overflow.

3. **country-chart.tsx - hover interaction:** The chart uses `onMouseEnter`/`onMouseLeave` for the hoveredCountry state. Add `onClick` handler that toggles the hoveredCountry state (if already hovered, clear it; otherwise set it). This way on touch devices, tapping a country row shows the tooltip/breakdown, and tapping again clears it. The existing onClick for `onSegmentClick` already exists -- combine the hover toggle into the same click: when a country is tapped on mobile, both show the hover details AND trigger the filter. This is already partially done since clicking triggers filter. The hover info is visual enhancement shown via `isHovered` state. Change the `onClick` to ALSO set `setHoveredCountry(country.name === hoveredCountry ? null : country.name)` so tapping toggles the hover detail display.

4. **age-gender-chart.tsx:** Similar hover pattern with `hoveredAge` state and `onMouseEnter`/`onMouseLeave`. Add an `onClick` on each bar group that toggles `setHoveredAge(age === hoveredAge ? null : age)`. The existing `onSegmentClick` is for filtering -- keep both behaviors on click. When user taps an age group bar, it shows the Male/Female/Total breakdown AND applies the visual filter effect.
  </action>
  <verify>
Run `npx next build` to confirm no build errors. At 375px viewport:
- Results tables scroll horizontally
- Country chart labels are narrower
- Tapping a country row or age group bar shows the breakdown info
  </verify>
  <done>
Tables have horizontal scroll on mobile. Country chart labels fit on narrow screens. Chart hover data is accessible via tap on touch devices.
  </done>
</task>

</tasks>

<verification>
- No horizontal page overflow at 375px in any analytics component
- All grids adapt to 1-2 columns on mobile
- Tables scroll horizontally on mobile
- Chart hover data accessible via tap
- `npx next build` succeeds
</verification>

<success_criteria>
- All 5 analytics components have responsive grids
- Both results-table tables have horizontal scroll wrappers
- Country chart labels are narrower on mobile (80px vs 144px)
- Country chart and age-gender chart show hover info on tap
- No build errors
</success_criteria>

<output>
After completion, create `.planning/phases/17-mobile-polish/17-02-SUMMARY.md`
</output>
