# Milestone v2.1: Polish & UX

**Status:** ✅ SHIPPED 2026-02-01
**Phases:** 14-17.2
**Total Plans:** 9

## Overview

Ship the deferred v1.1 polish items — ad previews, chart interactions, export improvements, and mobile responsiveness. Includes two inserted gap-closure phases (17.1, 17.2) from milestone audit.

## Phases

### Phase 14: Ad Preview
**Goal**: Fix ad preview gaps — media type badges use resolved type, creative text shows in full
**Depends on**: Phase 13
**Requirements**: PREV-01, PREV-02, PREV-03
**Plans**: 1 plan

Plans:
- [x] 14-01: Fix media type badge and remove creative text truncation

**Details:**
- Used resolvedMediaType from useAdMedia hook for badge display instead of raw ad.mediaType
- Removed line-clamp-2 from creative body text, preserved on linkTitle
- Success criteria: click to view ad on Facebook, full creative text visible, video/image badges based on resolved type

### Phase 15: Chart Improvements
**Goal**: Interactive charts with rich tooltips, responsive sizing, and click-to-filter
**Depends on**: Phase 13
**Requirements**: CHRT-01, CHRT-02, CHRT-03
**Plans**: 2 plans in 2 waves

Plans:
- [x] 15-01: Rich tooltips and responsive sizing for Recharts charts (MediaTypeChart, TimeTrends)
- [x] 15-02: Click-to-filter interactivity for CountryChart, AgeGenderChart, and MediaTypeChart

**Details:**
- Recharts v3 render function tooltip pattern with CSS variable theming
- chartFilter state with type/value/label, toggle behavior
- filteredAds useMemo filters ad list by country region or media type
- ActiveChartFilter clearable pill component with emerald accent
- AgeGender click is visual-only (demographics are aggregated, don't map to individual ads)
- Opacity dimming (opacity-40) for non-active chart segments

### Phase 16: Export Enhancement
**Goal**: Professional PDF export with section-based capture, cover page, headers/footers, multi-tab content, and progress feedback
**Depends on**: Phase 13
**Requirements**: EXPT-01
**Plans**: 2 plans in 2 waves

Plans:
- [x] 16-01: Section-based PDF capture with cover page and headers/footers
- [x] 16-02: Multi-tab content capture, DOM preparation, and export progress UI

**Details:**
- Section-based PDF capture via data-pdf-section attributes (replaces single-screenshot approach)
- Cover page with brand name, key stats, generation date
- Headers (brand + date) and footers (page numbers) on every content page
- White background (#ffffff) for print-friendly output
- Multi-tab capture: isExporting state renders all three tabs simultaneously
- onProgress callback pattern for real-time progress feedback

### Phase 17: Mobile Polish
**Goal**: Responsive layout and touch-friendly interaction on mobile devices
**Depends on**: Phase 14, 15
**Requirements**: MOBL-01, MOBL-02
**Plans**: 2 plans in 1 wave

Plans:
- [x] 17-01: Main page responsive fixes (options bar, media type, tabs, table, export dropdown, touch targets)
- [x] 17-02: Component responsive fixes (analytics grids, results tables, chart touch interactions)

**Details:**
- Hidden dividers on mobile (hidden sm:block)
- Dual hover+tap for export dropdown
- Tab icons hidden on mobile for 375px fit
- min-h-[48px] touch target pattern
- Responsive grids via Tailwind breakpoints
- Click toggles hover state on charts for touch devices
- Horizontal scroll tables with min-w-[640px]

### Phase 17.1: Export & Filter Fix (INSERTED)
**Goal**: Fix filtered PDF output, mobile export progress, and tooltip overflow
**Depends on**: Phase 17
**Requirements**: None (integration/tech debt fixes from audit)
**Gap Closure**: Closes gaps from v2.1-MILESTONE-AUDIT.md
**Plans**: 1 plan

Plans:
- [x] 17.1-01: Fix filtered PDF ads, mobile export progress, and tooltip overflow

**Details:**
- Export data source pattern: isExporting ? apiResult.ads : filteredAds (unfiltered PDF)
- Mobile export progress shown on button element (not just dropdown)
- Responsive tooltip positioning: left-20 sm:left-36 matching label column widths

### Phase 17.2: Dead Code Cleanup (INSERTED)
**Goal**: Remove orphaned components that are exported but never imported
**Depends on**: Phase 17.1
**Requirements**: None (tech debt cleanup from audit)
**Gap Closure**: Closes gaps from v2.1-MILESTONE-AUDIT.md
**Plans**: 1 plan

Plans:
- [x] 17.2-01: Delete orphaned MediaTypeChart and ResultsTable components

**Details:**
- Deleted orphaned MediaTypeChart and ResultsTable components (597 lines of dead code)
- Components were exported but never imported — Phase 15/17 work on them had zero user-visible effect

---

## Milestone Summary

**Decimal Phases:**

- Phase 17.1: Export & Filter Fix (inserted after Phase 17 for audit gap closure)
- Phase 17.2: Dead Code Cleanup (inserted after Phase 17.1 for audit gap closure)

**Key Decisions:**

- Recharts v3 render function tooltip pattern for custom tooltips
- Click-to-filter with toggle behavior and opacity dimming for non-active segments
- Section-based PDF capture replacing single-screenshot approach
- Multi-tab capture via isExporting state that renders all tabs simultaneously
- Dual hover+tap pattern for mobile export dropdown
- min-h-[48px] touch target standard across all interactive elements

**Issues Resolved:**

- Fixed media type badges showing 'unknown' (used resolvedMediaType from useAdMedia)
- Fixed filtered ad table appearing in PDF (switched to unfiltered data during export)
- Fixed mobile export progress not visible (rendered on button, not just dropdown)
- Fixed country chart tooltip overflow on 375px viewports
- Removed 597 lines of orphaned dead code (MediaTypeChart, ResultsTable)

**Issues Deferred:**

- None — all audit gaps resolved

**Technical Debt Incurred:**

- None — clean milestone with zero remaining tech debt

---

_For current project status, see .planning/ROADMAP.md_
